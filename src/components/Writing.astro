---
import ArticleCard from './ArticleCard.astro';
import ExternalLink from './icons/ExternalLink.astro';
import { fetchMediumArticles } from '../lib/rss';

interface Props {
  mediumUsername?: string;
}

const { mediumUsername = 'your-medium-username' } = Astro.props;

// Fetch articles at build time
let articles = await fetchMediumArticles(mediumUsername, 4);

// Fallback placeholder articles if fetch fails
if (articles.length === 0) {
  articles = [
  ];
}
---

<section id="writing" class="py-24 px-6">
  <div class="max-w-content mx-auto">
    <h2 class="text-3xl md:text-4xl font-bold text-text mb-12 animate-on-scroll">Writing</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      {articles.map((article) => (
        <ArticleCard {...article} />
      ))}
    </div>

    <a
      href={`https://medium.com/@${mediumUsername}`}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-2 text-accent hover:text-accent-hover transition-colors"
    >
      Read more on Medium
      <ExternalLink class="w-4 h-4" />
    </a>
  </div>
</section>
