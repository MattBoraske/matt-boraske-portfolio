---
import TimelineItem from './TimelineItem.astro';
import { parseTimeline } from '../utils/parseTimeline';
import osuLogo from './icons/osu.svg';
import wcuLogo from './icons/wcu.svg';
import cslLogo from './icons/csl.svg';
import epicLogo from './icons/epic.svg';
import hondaLogo from './icons/honda.png';

// Logo mapping for companies
const logoMap: Record<string, string> = {
  'CSL Behring': cslLogo.src,
  'Epic Systems': epicLogo.src,
  'Honda of America Manufacturing, Inc.': hondaLogo.src,
  'West Chester University of Pennsylvania': wcuLogo.src,
  'The Ohio State University': osuLogo.src
};

// Parse timeline from markdown file
let experiences = parseTimeline('./src/resources/timeline.md');

// Map logo references to actual imports
experiences = experiences.map(exp => ({
  ...exp,
  logo: logoMap[exp.company] || exp.logo
}));
---

<section id="experience" class="py-24 px-6 bg-bg-secondary">
  <div class="max-w-content mx-auto">
    <div class="section-header animate-on-scroll">
      <span class="header-bracket">[</span>
      <h2 class="text-3xl md:text-4xl font-bold text-text">Experience & Education</h2>
      <span class="header-bracket">]</span>
    </div>

    <div class="max-w-2xl mx-auto">
      {experiences.map((exp) => (
        <TimelineItem {...exp} />
      ))}
    </div>
  </div>
</section>

<style>
  .section-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 3rem;
  }

  .header-bracket {
    font-family: var(--font-display);
    font-size: 3rem;
    color: var(--color-accent);
    font-weight: 900;
  }
</style>
